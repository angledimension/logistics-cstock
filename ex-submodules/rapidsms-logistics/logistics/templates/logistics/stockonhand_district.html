{% extends "logistics/reports_base.html" %}
{% load i18n %}
{% load logistics_extras %}

{% block content %}
    <div class="module">
        {% include "logistics/partials/accordion_nav.html" %}
        <div id="main">
            <h2>{{ selected_commodity.name }} Stock in {{ location.name }}</h2>
            <div class="right">
                {% include "logistics/partials/commoditytype_filter.html" %}
                {% include "logistics/partials/commodity_filter.html" %}
            </div>
            <div>
                <table class="stock">
                    <thead><tr>
                        <th>{{ selected_commodity.name }} </th>
                        <th class="stock_col">{% trans "Months Until Stockout" %}</th>
                        <th class="stock_col">{% trans "Current Stock" %}</th>
                        <th class="stock_col">{% trans "Monthly Consump." %}</th>
                        <th class="stock_col">{% trans "Emerg. Level" %}</th>
                        <th class="stock_col">{% trans "Reorder Level" %}</th>
                        <th class="stock_col">{% trans "Max Level" %}</th>
                    </tr></thead>
                    <tbody>
                    {% for stockonhand in stockonhands %}
                        <tr>
                        <td><a href="{% url stockonhand_facility stockonhand.facility.code %}">
                            {{ stockonhand.facility.name }}
                            </a>
                        </td>
                            {% highlight_months stockonhand %}
                        <td>{{ stockonhand.quantity|default_if_none:"n/a" }}</td>
                        <td {% ifequal stockonhand.get_monthly_consumption None %}
                                class="big_error"
                            {% endifequal %}>
                            {{ stockonhand.get_monthly_consumption|default_if_none:"not set" }}
                        </td>
                        <td>{{ stockonhand.emergency_reorder_level|default_if_none:"n/a" }}</td>
                        <td>{{ stockonhand.reorder_level|default_if_none:"n/a" }}</td>
                        <td>{{ stockonhand.maximum_level|default_if_none:"n/a" }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        <br/>
    </div>
{% endblock %}
