{% extends "logistics/reports_base.html" %}
{% load i18n %}

{% block content %}
    <div class="module">
        {% include "logistics/partials/accordion_nav.html" %}
        <div id="main">
            <h2>{{ location.name }} {% trans "Aggregate Stock Report" %}</h2>
            <div class="right">
                {% include "logistics/partials/commoditytype_filter.html" %}
                {% include "logistics/partials/commodity_filter.html" %}
            </div>
            <div>
            <table class="stock" width=100%>
            <thead><tr>
                <th scope="col">Facility</th>
                <th scope="col" class="stock_col">Stockouts</th>
                <th scope="col" class="stock_col">Emergency</th>
                <th scope="col" class="stock_col">Low</th>
                <th scope="col" class="stock_col">In Stock</th>
                <th scope="col" class="stock_col">Overstocks</th>
            </tr></thead>
            <tbody>
            {% for row in rows %}
                <tr>
                <td><a href="{{ row.url }}">{{ row.name }}</a></td>
                <td {% ifnotequal row.stockout_count 0 %}class="stockout"{% endifnotequal %}>{{ row.stockout_count }}</td>
                <td {% ifnotequal row.emergency_stock_count 0 %}class="emergency"{% endifnotequal %}>{{ row.emergency_stock_count }}</td>
                <td {% ifnotequal row.low_stock_count 0 %}class="low_supply"{% endifnotequal %}>{{ row.low_stock_count }}</td>
                <td {% ifnotequal row.good_supply_count 0 %}class="good_supply"{% endifnotequal %}>{{ row.good_supply_count }}</td>
                <td {% ifnotequal row.overstocked_count 0 %}class="overstock"{% endifnotequal %}>{{ row.overstocked_count }}</td>
                </tr>
            {% endfor %}
            </tr></tbody>
            </table>

            <p class="smallnote">
                Note: these numbers represent the total number of stockouts
                across all commodities in the region indicated. The above table also does
                not reflect commodities for which the monthly consumption is unknown. 
            </p>
            </div>
        </div>
    </div>
{% endblock %}
