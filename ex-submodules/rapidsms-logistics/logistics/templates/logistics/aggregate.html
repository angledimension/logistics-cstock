{% extends "logistics/reports_base.html" %}
{% load i18n %}

{% block content %}
    <div class="module">
        {% include "logistics/partials/accordion_nav.html" %}
        <div id="main">
            <h2>{{ location.name }} {% trans "Aggregate Stock Report" %}</h2>
            <table class="stock">
            <thead><tr>
                <th scope="col">Facility</th>
                <th scope="col">Stockouts</th>
                <th scope="col">Emergency</th>
                <th scope="col">Low</th>
                <th scope="col">In Stock</th>
                <th scope="col">Overstocks</th>
            </tr></thead>
            <tbody>
            {% if location.children %}
                {% for child in location.children %}
                    <tr>
                    <td>{{ child.name }}</td>
                    <td {% ifnotequal child.stockout_count 0 %}class="stockout"{% endifnotequal %}>{{ child.stockout_count }}</td>
                    <td {% ifnotequal child.emergency_stock_count 0 %}class="emergency"{% endifnotequal %}>{{ child.emergency_stock_count }}</td>
                    <td {% ifnotequal child.low_stock_count 0 %}class="low_supply"{% endifnotequal %}>{{ child.low_stock_count }}</td>
                    <td {% ifnotequal child.good_supply_count 0 %}class="good_supply"{% endifnotequal %}>{{ child.good_supply_count }}</td>
                    <td {% ifnotequal child.overstocked_count 0 %}class="overstock"{% endifnotequal %}>{{ child.overstocked_count }}</td>
                    </tr>
                {% endfor %}
            {% else %}
                {% for child in location.facilities %}
                    <tr>
                    <td>{{ child.name }}</td>
                    <td {% ifnotequal child.stockout_count 0 %}class="stockout"{% endifnotequal %}>{{ child.stockout_count }}</td>
                    <td {% ifnotequal child.emergency_stock_count 0 %}class="emergency"{% endifnotequal %}>{{ child.emergency_stock_count }}</td>
                    <td {% ifnotequal child.low_stock_count 0 %}class="low_supply"{% endifnotequal %}>{{ child.low_stock_count }}</td>
                    <td {% ifnotequal child.good_supply_count 0 %}class="good_supply"{% endifnotequal %}>{{ child.good_supply_count }}</td>
                    <td {% ifnotequal child.overstocked_count 0 %}class="overstock"{% endifnotequal %}>{{ child.overstocked_count }}</td>
                    </tr>
                {% endfor %}
            {% endif %}
            </tr></tbody>
            </table>
        </div>
    </div>
{% endblock %}
