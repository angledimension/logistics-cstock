{% extends "messaging/base.html" %}
{% block title %}Messaging{% endblock %}

{% block content %}
<div class="split">
	<div class="left">
		<div class="module recipients">
			<h2>Select Recipients</h2>
			<div class="search">
				<select name="column">
					<option value="">Any Column</option>{% for column in columns %}
					<option>{{ column }}</option>{% endfor %}
				</select>
				
				<select name="operation">
					<option value="cn">contains</option>
					<option value="eq">equals</option>
					<option value="sw">starts with</option>
					<option value="ew">ends with</option>
					<option value="lt">is less than</option>
					<option value="gt">is more than</option>
				</select>
				
				<input type="text" name="search" value="" size="14" />
			</div>
			<table>
				<thead>
					<tr>{% for column in columns %}
						<th>{{ column }}</th>{% endfor %}
					</tr>
				</thead>
				<tbody>{% for recipient in recipients %}
					<tr>{% for col_val in recipient %}
						<td>{{ col_val }}</td>{% endfor %}
					</tr>{% endfor %}
				</tbody>
				<tfoot>
					<tr>
						<td colspan="{{ app.columns|length }}">
							<div class="paginator">
								<a href="" class="active">0</a>
								<a href="">1</a>
								<a href="">2</a>
								<a href="">3</a>
							</div>
							<a href="">Export</a>
						</td>
					</tr>
				</tfoot>
			</table>
		</div>
	</div>
	<div class="right">
		<div class="module contents">
			<h2>Message Contents</h2>
			<textarea cols="40" rows="6"></textarea>
			<input type="button" value="Send" />
		</div>
	</div>
	<div class="clear-hack"></div>
</div>

<script type="text/javascript">
	
	/* expand the search box to fill the remaining space
	 * to the right. this is pointless but rather pretty */
	 
	$(function() {
		$("div.module.recipients .search input[name=search]").each(function() {
			var input = $(this);
			
			var box_offset = $(input.parent().children()[0]).offset()["left"];
			var inp_offset = input.offset()["left"] - box_offset;
			var inp_width  = input.parent().width() - inp_offset;
			
			input.css({
				"-moz-box-sizing": "border-box",
				"width": inp_width
			});
		});
	});
</script>
{% endblock %}
