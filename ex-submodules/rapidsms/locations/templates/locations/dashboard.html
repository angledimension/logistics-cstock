{% extends "locations/base.html" %}
{% load table_tags %}
{% load forms_tags %}

{% block stylesheets %}
{{ block.super }}
<link type="text/css" rel="stylesheet" href="/static/locations/stylesheets/label-overlay.css" />
{% endblock %}

{% block javascripts %}
{{ block.super }}
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script src="{{ MEDIA_URL }}locations/javascripts/label-overlay.js" type="text/javascript"></script>
<script src="{{ MEDIA_URL }}locations/javascripts/mask.js" type="text/javascript"></script>
<script src="{{ MEDIA_URL }}locations/javascripts/map.js" type="text/javascript"></script>
{% endblock %}

{% block left %}{% for location_type, locations_table in location_type_tables %}{% if locations_table.rows %}
<div class="module">
	<h2>{{ location_type.plural|title }}</h2>
	<table class="locations">
		{% table_cols locations_table %}
		{% table_head locations_table %}

		<tbody>{% for location in locations_table.rows %}
			<tr>
				<th scope="row"><a href="{% url locations location.type_slug location.pk %}">{{ location.name }}</a></th>
				<td>{{ location.slug|upper }}</td>
			</tr>{% endfor %}
		</tbody>

		{% table_foot locations_table %}
	</table>
</div>{% endif %}{% endfor %}
{% endblock %}

{% block right %}
<div class="module">
	<h2>Map</h2>
	<div class="map" lat="{{ default_latitude }}" lng="{{ default_longitude }}">
		<div class="container"></div>

		<ul class="labels">{% for type, locations in all_locations %}{% for location in locations %}
			<li lat="{{ location.point.latitude }}" lng="{{ location.point.longitude }}">
				{{ location.label }}
			</li>{% endfor %}{% endfor %}
		</ul>
	</div>
</div>
{% endblock %}
